# Project Name / Version

호서타임 / 1.0

# affiliation / Writer

호서대학교 컴퓨터정보공학부 / 20181189 신효승, 2018xxxx 이희진

# Project Overview

## Project Scope

학생이라면 누구나 학교에 다니면서 수업을 들으며 살아간다. 한 가지 수업만 듣는 게 아니고, 여러 가지 수업을 듣기 때문에 모두 다 챙기기엔 한 눈에 볼 수 있게끔 정리할 필요가 있다. 

이전에는 오프라인으로 수업을 들으며 각자 기록을 통해 수업들을 관리해 왔겠지만 코로나 시대가 되면서 오프라인으로 관리 되던 강의, 질문, 공지, 과제 등까지 모두 온라인으로 해결해야 하는 상황이 발생했다. 물론 한 가지 수업마다 개설된 클래스 공간이 따로 있어 한눈에 보기 편하지만 교수님들 마다 사용하는 공간과 소통하는 방법이 다르다. 

학생 A는 구글 클래스나 블랙보드, 팀즈 등 학교 소셜들에 올라온 강의를 챙겨보며 공지사항과 과제까지 관리하면서 공지사항에 올라온 카카오톡 링크를 통해 오픈 채팅방에 들어가서 교수님과 소통한다. 교수님과 소통하는 방법은 카카오톡 말고도 이메일을 보내거나 출결 관리앱을 통해 쪽지를 보내는 등 교수님들 마다 다양하다. 

학생A는 어제도 전공 과제 하나를 까먹고 있다가 제 시간에 제출하지 못하는 실수를 했다. 구글 클래스와 블랙보드 과제는 다 했지만 팀즈로 관리되는 과제는 미처 신경 쓰지 못했다. 2주전 에는 과제를 하러 소셜에 접속 했더니 점검중이어서 불가능하다는 메시지와 함께 그날 해야 하는 과제 제출에 문제가 생겼다. 

소셜 점검 공지를 제대로 확인하지 못했고 쪽지를 통해서도 공지가 왔던 모양인데 수업 내 공지와 카카오톡을 신경 쓰느라 나머지는 소홀히 대했더니 터진 참사였다. 물론 소홀히 챙긴 학생 A의 잘못이 맞지만 한눈에 보기 쉽게 모든 수업 관련 내용을 관리 할 수있었다면 이런 일은 발생하지 않았을 거라는 생각이 한편으론 든다. 

하지만 학교가 보내는 쪽지, 소셜 공지, 카카오 톡을 통한 수업 관련 내용 전파, 시간표확인과 같은 기능들은 전부 다른 애플리케이션을 통해 관리되고 이들이 통합 관리 되는 서비스는 찾기 어렵다. 

코로나 시대가 되면서 온라인 수업이 활성화가 되어 수업마다 온라인상 공간을 만들어나가고는 있지만 여러 가지 수업을 듣는 학생들에겐 이 모두를 관리하기엔 버겁다. 그래서 다양하게 분포 된 기능들을 한 공간에서 모두 접근 할 수 있게 해주는 수업 관리용포털이 있으면 좋겠다. 라는 생각을 하게 되었다. 

이러한 기능을 가진 서비스가 개발 된다면 온라인으로 관리되는 모든 프로그램들을 사용자 관점에서 편리하게 접근, 관리하는데 도움이 될 것이다.
코로나 시대가 되면서 온라인 수업이 보편화 되는 이 사회에서 사용자들이 보다 쉽게 본인의프로그램을 체계적으로 컨트롤 하는데 도움이 되지 않을까 하는 생각으로 기획하게 되었다. 

## Project Objectives

학생들은 그날 수업을 듣기 위해 제일 먼저 시간표부터 확인한다. 수업 관리를 한눈에 할 수 있게끔 시간표 형식을 채택하였다. 

이전에는 카카오톡, 학교 쪽지, 소셜 공간, 이메일 등 여러 공간을 통해 한 수업에 접근 하여서 복잡했지만 한가지 수업을 관리하는데 있어 한 가지 공간을 제공해주어 사용자들이 편리하게 관리 할 수 있게 하는 것이 프로젝트의 최종적인 목표이다. 

프로젝트 개발 범위는 시간표 형식으로 정렬된 수업들 중 해당수업을 클릭하면 오프라인수업 위치, 사용하는 소셜 공간, 쪽지 및 메신저 기능 등을 확인할 수 있게끔 구현하는데오프라인 수업 위치는 구글 지도앱을 사용해서 표시하였다.

이외에 교수님 이메일이나 다른 링크 등의 정보는 학생이나 교수님이 입력함에 따라 관리된다. 기존에 카카오톡 채팅 서비스와 학교에서 보내는 쪽지 서비스를 수업마다 한 공간으로 통합시켜 주의가 분산되지 않고 집중할 수 있게 해주는 시스템이다. 

기존의 쪽지기능에는 멀티미디어 메시지 기능이 없어서 이메일로 대체 하였으나 카메라, 사진 동영상 첨부 기능 등을 추가하여 이메일을 따로 사용하지 않고도 앱 공간내에서 소통이 가능하게끔 하였다.

## Development Schedule Plan
+ 프로젝트 기간 : 2021.05.18 ~ 2021.06.25
+ 개발 환경 : Windows 10, Android Studio, Java(TM) SE Development Kit 15.0.1(64-Bit), FireBase
+ 개발 도구 : Android Studio
+ 개발 언어 : JAVA
+ 작업 분할 구조도(WBS)
![0001](https://user-images.githubusercontent.com/84660344/122668279-3962d000-d1f2-11eb-9f04-d63b3ecb2426.jpg)
+ 개발 일정계획 간트 차트

# Program Configuration Diagram

## Entire function

본 프로그램은 학생들의 편의를 도와주는 부분과 학생들의 편의성을 고려하여 개발에 착수하였기 때문에 Android Studio를 이용해서 어플리케이션 개발을 진행하게 되었고, 이메일과 비밀번호 활용하여 로그인을 구현하였다.

프로그램의 기능은 학생 데이터를 기반으로 시간표를 임의로 출력하는 것과, 수업 위치를 직관적으로 확인하고 싶을 때 해당 과목을 클릭 시, 지도가 연계되며, 위치와 건물명을 볼 수 있게 하였고, 쪽지 및 메신저 기능을 이용하여 교수와 학생간의 필요한 내용들을 기재 할 수 있게 하였다.

이외에도 교수님의 이메일이나 다른 링크 등의 정보는 학생이나 교수님이 입력함에 따라 관리되며, 기존에 카카오톡 채팅 서비스와 학교에서 보내는 쪽지 서비스를 수업마다 한 공간으로 통합하였고, 쪽지 기능에는 멀티미디어 메시지 기능이 없으므로 이메일로 대체하였으나 카메라, 사진 동영상 첨부 기능 등을 추가하여 이메일을 따로 사용하지 않고도 어플리케이션 내에서 소통이 가능하게 하였다.

## Detailed Features

### Sign up for membership and login

애플리케이션 아이콘 및 이름, 이메일, 비밀번호 텍스트 영역, 로그인 및 회원가입 버튼 영역으로 로그인 화면이 구성되며, 회원가입 버튼을 누를 시, 회원가입 창으로 전환된다.
회원가입 창은 타이틀, 이메일 ID, 비밀번호 PW 텍스트 영역, 라디오 체크 박스로 구성된 학생, 교수, 학생과 가입하기 버튼 영역으로 구성된다.

이메일과 비밀번호 그리고 라디오 체크 박스를 클릭 후 가입하기 버튼을 누를 시, 학생정보 추가 창으로 화면 전환이 된다.
학생정보 추가 창은 타이틀 영역, 이름, 학과, 학번 텍스트 영역, 등록 버튼 영역으로 구성된다. 그리고 해당 텍스트 영역을 입력 한 후, 등록 버튼을 누를 시, 메인 화면으로 전환된다.

메인 화면 창은 수강목록, 시간표, 쪽지함 버튼 영역, 아이콘 및 공지사항 텍스트 영역과 공지사항 리스트 뷰 영역으로 구성된다.

### Timetable

시간표 버튼을 누를 시, 월 ~ 금요일 기준으로 0교시에서 9교시까지 해당 학생이 수강
한 과목을 표시한다.

### Engineering Hall Location

구글 API를 발급받아서 사용하며, 학교 해당 공학관의 위치를 구글 맵을 통해 좌표값을 받아 보여준다. 

### Memo Box

[타이틀]영역, [쪽지 리스트]영역, [발신함],[수신함]버튼 영역으로 메인화면이 구성된다. 
해당 쪽지 리스트를 클릭하면 내용 화면과 [쪽지 보내기] 버튼 [닫기] 버튼으로 구성된 화면으로 이동한다.
[쪽지 보내기] 버튼을 클릭하면 [보내는 대상] 영역과 텍스트 입력창, [보내기] 버튼으로 구성된 화면으로 이동한다. 

쪽지 보내기 기능은 메시징 멀티미디어 기능은 사진, 카메라, 동영상, 첨부파일의 기능이 있다.

# Project progress results and impressions

## Background and Objectives
수업 관리 애플리케이션은 수업을 관리하는데 있어 분산된 여러 수업 환경들을 하나의 공간에 통합해 주기 위해 한눈에 보기 쉬운 UI로 구성하였다.
메인화면은 학교 공지사항과 학교 쪽지함 등 학교와의 소통공간이 주가 되고 시간표나 수업 목록을 통해 수업을 한눈에 관리하기 좋다 하나의 수업 공간을 통해서 수업 정보,
교수 정보, 소셜 네트워크, 채팅방, 쪽지 등 여러 기능에 접근 하기 좋다. 해당 프로젝트는 월초부터 시작하여 월초까지 완료할 수 있도록 개발 일정을 잡았다.
주요서비스 : 시간표 조회 (수업관리) 게시, 메모, 쪽지, 공지사항 

## Implementation Power
프론트 앤드 개발보다는 늘 백엔드 위주로 개발을 해왔기에 디자인과 레이아웃에 익숙하지 않았고, 안드로이드 스튜디오를 처음 접하는 상태이기에 대부분 인터넷 자료를 참고
하였으나, 배우지 않은 것을 해보는 것은 쉽지 않았다. 

시작은 프론트 앤드 개발에 기본인 레이아웃과 화면 구성을 하는 것이었다. 먼저 Style 부분에서 windowActionBar를 False하고, windowNoTitle true 하여 상단바를
비활성화 하였다. 그 후 Login Activity와 activity_login.xml 생성하였고, activity_login.xml의 경우 로그인 화면의 레이아웃과 화면 구성을 지니며, Linearlayout으로 
레이아웃을 지정한 후, ImageView로 애플리케이션의 대표 아이콘을 디자인 하였다. 

TextView를 활용하여, ID, Password를 생성 하였고, Button를 활용하여, 로그인 버튼과 회원가입 버튼을 생성하였다. 색상은 color.xml로 대표적인 컬러를 지정하여, textColor로
해당 color.xml를 불러와 디자인 하였다. Login Activity 경우 findViewById로 회원가입과 로그인 버튼을 연동하여, 버튼 클릭시 이벤트 처리를 하였다.

다음으로 회원가입을 구현하기 위한 activity_register.xml와 RegisterActivity를 생성한다.activity_register.xml에서는 LinearLayout으로 레이아웃을 지정한 후, TextView로 이메일과 비밀번호를 디자인 하였고, RadioButton를 활용하여 학생, 교수, 학교를 선택할 수 있게 구현하였다. 그 다음 Button를 활용하여 가입하기를 생성했고, RegisterActivity에서도 마찬가지로 해당 버튼을 클릭시 이벤트 처리 하였다. 

다음 로그인 시, 띄울 메인화면인 MainActivity와 activity_main.xml를 생성하였고,activity_main.xml은 Linearlayout으로 레이아웃을 구성한 후 Button를 활용하여, 맨 상단
에 수강목록, 시간표, 쪽지함을 구현하였다. 그 후, 애플리케이션의 대표 아이콘을 Image View와 함께 TextView를 사용하여 공지사항을 기입하였다. 공지사항 밑에는 각 부서의 공지사항을 확인할 수 있게 ListView를 활용하여, 표기하였다. 

각 버튼의 화면 전환은 Fragment(Blank)와 xml를 생성하였다. 시간표 Fragment의 경우fragment_schedule.xml 생성하였고, FrameLayout과 Table Layout를 활용하여 디자인과
레이아웃을 구현하였다. 그 뿐만 아니라, AutoResizeTextView 오픈 소스를 활용하여, 글씨에 맞게 시간표의 각 행과 열을 동적으로 구현하였다.

서버 작업을 도와주는 앱개발 플랫폼인 파이어베이스를 이용해 개발하였다. 안드로이드 프로젝트와 파이어베이스를 연결 시키기 위해서 안드로이드 package 이름을 입력해주고 생성된 google-service라는 json파일을 프로젝트의 app디렉터리에 넣어주었다. 

파이어베이스를 사용하기 위해서 필요한 라이브러리 설정을 추가해주고, Tools의 Firebase를 연결 시켜준다. Authentication을 통해서 회원 가입을 하고 콘솔을 통해 확인 할 수 
있는데 여러 가지 방법을 통해 가입 할 수 있지만 이메일-비밀번호를 사용하였다. 

총 3가지 카테고리의 사용자 유형을 분류하고 다루기 위해서 회원가입 할 때 유형을 라디오 버튼을 통해 입력 받아 분류 해주었고 사용자 유형에 맞춰진 정보 추가 액티비티를 
호출해주어 알맞은 데이터테이블을 구성해주었다.

제공해주는 Firestore라는 데이터베이스를 사용하였는데 Firebase 문서에 나와있는 사용 함수들의 특성과 코드들을 통해 개발하였다. 기존의 sql문법과 달라서 학습하는데 어려움
이 있었다. 데이터베이스 구조는 컬렉션과 문서로 표현되는데 컬렉션이 문서의 모음이고 문서는 필드로 구성된다. 문서는 각각 고유한 ID를 통해 구분할 수 있다. 문서는 컬렉션
을 설정하여 필드 정보를 통해서 유용하게 검색할 수 있다. 

사용자에게 맞춤형 수업 목록을 제공하기 위해서는 사용자가 수강하는 수업을 검색할 수 있어야 하는데 데이터베이스를 효율적으로 운용하기 위해서 사용자번호와 수업 코드와 
이름만으로 구성된 쿼리 맞춤용인 수강 테이블(학생용)과 강의 테이블(교수용)을 만들어 주었다.

그 외의 테이블은 기능에 맞게끔 유용한 검색이 가능하게 구성하였다. 기존에 연결되었던 데이터베이스를 삭제하고 재연결 하는 과정에서 인증부터 실패하는 
어려움이 있었지만 project clean을 해주고 Tools 의 Firebase 연결을 해주었더니 말끔하게 해결되었다. 테스트를 해본 결과 로그아웃을 한 뒤에 뒤로가기를 누르면 앱이 꺼지는 것이 아니라 이전 로그인된 화면으로 넘어가서 자동으로 로그아웃이 되는 장애가 발생 했다. 로그인 화면이 메인 화면으로 넘어갈 때 finish()로 액티비티를 종료해주어 이 현상을 막아주었다. 

또 로그아웃을 한 뒤에 로그인 액티비티 화면에서 뒤로가기를 누르면 이전 액티비티인 메인 화면으로 넘어가면서 자동 로그인이 되는 장애가 발생 했다. 로그인 화면에서 뒤로
가기를 눌렀을 때 무조건 꺼주면 해결되는 문제이므로 public void onBackPressed() 함수 안에다가 moveTaskToBack(true);
android.os.Process.killProcess(android.os.Process.myPid()); System.exit(1);를 써주어 프로그램을 아예　종료시켜버렸다. 

지도는 googleAPI를 받아와서 좌표를 입력해서 출력해주었다. 좌표를 담아주기 위해 LatLng객체를 생성하여 파라미터로 넣어준다. 마커는 onMapReady() 호출시 파라미터로 
넘어오는 객체를 이용하여 addMarker(new MarkerOptions().position(Latlng 객체).title()을 통해 달아준다. 

## Current Status
학교 사용자의 기능은 수업 관리 기능이 필요 없기 때문에 학생이나 교수에 비해 단순하다. 
교수의 정보 게시 기능을 이용하여 학교 공지사항을 업로드 해주는 기능은 아직 미 구현 상태이다. 
데이터베이스에 데이터를 등록하거나 가져올 순 있는데 사용자 인터페이스로 출력시키는 기능을 구현하지 못했다. 

## Future plan
현재 로그인과 로그아웃은 되지만 비밀변호를 잃어버렸을 때 찾는 기능이나 변경 기능은 미구현 상태이다. 추후 완성도를 높이기 위해 기능을 추가한다 
기능을 발전시키기 이전에 테스트를 하면서 사소한 부분임에도 앱을 사용하는데 지장이 있는 경우를 많이 발견하였다. 예를 들면 로그인 아웃하고 난 뒤 뒤로 가기 버튼을 누르면 다시 로그인을 하는 장애를 이전 액티비티를 지워주는 기능을 사용해 보완한다. 

이외에도 사용자 정보 등록의 경우에만 세 가지 케이스가 있어 하나하나 전부 꼼꼼히 확인해보는 등 촘촘히 테스트 한다. 
많은 애플리케이션 리뷰만 봐도 앱을 사용하는데 사소한 부분에서 장애가 셀 수 없이 많이 발생한다는 걸 알 수 있다. 실제로 동적 테스팅 위주로 했음에도 엄청 나게 많은 장애가 발생한다. 구현 도중에도 학생 정보 등록에는 문제가 없었지만 교수 정보 등록에 버튼 명을 잘못 입력하여 제대로 실행되지 않는 등 꼼꼼한 테스트는 앱의 품질에 있어 중요하다. 
